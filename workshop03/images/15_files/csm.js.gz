var amzncsm=amzncsm||{};amzncsm.errorCodes={SLOT_INSIDE_UNFRIENDLY_FRAME:1,UNSUPPORTED_BROWSER:2,ERROR_SENDING_PIXEL:3,INVALID_API:4},amzncsm.errorBeaconSent=!1,amzncsm.errors=[],amzncsm.reportErrors=function(a,b,c){var d,e,f="https:"===document.location.protocol?"https://":"http://",g=amzncsm.host||"aax.amazon-adsystem.com",h="/x/px/",i=b?'"src": '+b+", ":"";for(e=0;e<amzncsm.errors.length;e++)d='{"adViewability":[{"error": {"m": "'+amzncsm.errors[e]+'"}}], "c": "viewability", "api": "'+a+'", '+i+'"error": 1}',(new Image).src=f+g+h+c+"/"+d+"&cb="+Math.round(1e7*Math.random());amzncsm.errors=[],amzncsm.errorBeaconSent=!0,amzncsm.detachAllHandlers()},function(a,b){function c(a){return a?a.replace(/^\s+|\s+$/g,""):void 0}function d(a){if(a&&a.s){var b,c=a.s.length>0?a.s[0]:"",d=a.s.length>1?a.s[1]:"";c&&(b=c.match(k)),b&&3==b.length||!d||(b=d.match(j)),b&&3==b.length&&(a.f=b[1],a.l=b[2])}}function e(a,b){if(b=b||{},!a)return{};a.m&&a.m.message&&(a=a.m);var e,j,k,l,m,n={m:f(a,b),c:a.c?""+a.c:a.c,s:[],l:a.l||a.line||a.lineno||a.lineNumber,name:a.name,type:a.type},o=0,p=0;if(e=a.stack||(a.err?a.err.stack:""),e&&e.split)for(j=e.split("\n");o<j.length&&n.s.length<h;)k=j[o++],k&&n.s.unshift(c(k));else for(l=g(a.args||arguments,"callee"),o=0,p=0;l&&h>o;)m=i,l.skipTrace||(k=l.toString(),k&&k.substr&&(m=0===p?4*i:m,m=1==p?2*i:m,n.s.unshift(k.substr(0,m)),p++)),l=g(l,"caller"),o++;return!n.f&&n.s.length>0&&d(n),n}function f(a,b){var c=b.m||b.message||"";return c+=a.m&&a.m.message?a.m.message:a.m&&a.m.target&&a.m.target.tagName?"Error handler invoked by "+a.m.target.tagName+" tag":a.m?a.m:a.message?a.message:"Unknown error"}function g(a,b){try{return a[b]}catch(c){return}}var h=20,i=256,j=/\(?([^\s]*):(\d+):\d+\)?/,k=/.*@(.*):(\d*)/;a.constructErrorMessage=e}(amzncsm,window),function(){var a=Array.prototype.slice;try{a.call(document.documentElement)}catch(b){Array.prototype.slice=function(b,c){var d,e,f,g,h,i;if(c="undefined"!=typeof c?c:this.length,"[object Array]"===Object.prototype.toString.call(this))return a.call(this,b,c);if(e=[],g=this.length,h=b||0,h=h>=0?h:g+h,i=c?c:g,0>c&&(i=g+c),f=i-h,f>0)if(e=new Array(f),this.charAt)for(d=0;f>d;d++)e[d]=this.charAt(h+d);else for(d=0;f>d;d++)e[d]=this[h+d];return e}}}(),Object.keys||(Object.keys=function(){"use strict";var a=Object.prototype.hasOwnProperty,b=!{toString:null}.propertyIsEnumerable("toString"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=c.length;return function(e){if("object"!=typeof e&&("function"!=typeof e||null===e))throw new TypeError("Object.keys called on non-object");var f,g,h=[];for(f in e)a.call(e,f)&&h.push(f);if(b)for(g=0;d>g;g++)a.call(e,c[g])&&h.push(c[g]);return h}}()),window.JSON||(window.JSON={parse:function(sJSON){return eval("("+sJSON+")")},stringify:function(){var a=Object.prototype.toString,b=Array.isArray||function(b){return"[object Array]"===a.call(b)},c={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},d=function(a){return c[a]||"\\u"+(a.charCodeAt(0)+65536).toString(16).substr(1)},e=/[\\"\u0000-\u001F\u2028\u2029]/g;return function f(c){var g,h,i,j;if(null==c)return"null";if("number"==typeof c)return isFinite(c)?c.toString():"null";if("boolean"==typeof c)return c.toString();if("object"==typeof c){if("function"==typeof c.toJSON)return f(c.toJSON());if(b(c)){for(g="[",h=0;h<c.length;h++)g+=(h?", ":"")+f(c[h]);return g+"]"}if("[object Object]"===a.call(c)){i=[];for(j in c)c.hasOwnProperty(j)&&i.push(f(j)+": "+f(c[j]));return"{"+i.join(", ")+"}"}}return'"'+c.toString().replace(e,d)+'"'}}()}),Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)}),String.prototype.endsWith||(String.prototype.endsWith=function(a,b){var c,d=this.toString();return("number"!=typeof b||!isFinite(b)||Math.floor(b)!==b||b>d.length)&&(b=d.length),b-=a.length,c=d.indexOf(a,b),-1!==c&&c===b}),window.Event&&document.createEvent&&!function(){function a(a,b){b=b||{bubbles:!1,cancelable:!1,detail:void 0};var c=document.createEvent("CustomEvent");return c.initCustomEvent(a,b.bubbles,b.cancelable,b.detail),c}a.prototype=window.Event.prototype,window.CustomEvent=a}(),function(a){var b,c,d,e,f;a.performance||(a.performance={}),a.performance.now||(a.performance.now=performance.now||performance.webkitNow||performance.msNow||performance.mozNow),a.performance.now||(b=Date.now?Date.now():+new Date,performance.timing&&performance.timing&&(b=performance.timing.navigationStart),a.performance.now=function(){var a=Date.now?Date.now():+new Date;return a-b}),c=[],d={},e=function(a,b){for(var d=0,e=c.length,f=[];e>d;d++)c[d][a]==b&&f.push(c[d]);return f},f=function(a,b){for(var d,e=c.length;e--;)d=c[e],d.entryType!=a||void 0!==b&&d.name!=b||c.splice(e,1)},a.performance.mark||(a.performance.mark=a.performance.webkitMark||function(b){var e={name:b,entryType:"mark",startTime:a.performance.now(),duration:0};c.push(e),d[b]=e}),a.performance.measure||(a.performance.measure=a.performance.webkitMeasure||function(a,b,e){b=d[b].startTime,e=d[e].startTime,c.push({name:a,entryType:"measure",startTime:b,duration:e-b})}),a.performance.getEntriesByType||(a.performance.getEntriesByType=a.performance.webkitGetEntriesByType||function(a){return e("entryType",a)}),a.performance.getEntriesByName||(a.performance.getEntriesByName=a.performance.webkitGetEntriesByName||function(a){return e("name",a)}),a.performance.clearMarks||(a.performance.clearMarks=a.performance.webkitClearMarks||function(a){f("mark",a)}),a.performance.clearMeasures||(a.performance.clearMeasures=a.performance.webkitClearMeasures||function(a){f("measure",a)})}(window),amzncsm=amzncsm||{},amzncsm.log=function(a){try{-1!==window.location.href.indexOf("csm_debug_mode")&&window.console&&window.console.log(a)}catch(b){}},amzncsm.loadModules=function(a,b){var c,d,e;try{for(c=0;c<b.length;c++){if(d=b[c].name,e=b[c].params||[],window.performance&&window.performance.mark&&"function"==typeof window.performance.mark&&window.performance.mark("loadStart"+d+a),"[object Array]"!==Object.prototype.toString.call(e),amzncsm[d]){if(void 0===amzncsm[d].shortName)throw new amzncsm.invalidModuleException("Module shortName not defined for module "+d+". ");e.unshift(a),amzncsm[d].init.apply(amzncsm[d],e)}window.performance&&window.performance.mark&&"function"==typeof window.performance.mark&&(window.performance.mark("loadEnd"+d+a),window.performance.measure("lt"+amzncsm[d].shortName+a,"loadStart"+d+a,"loadEnd"+d+a))}}catch(f){f.message&&amzncsm.errors.push(f.message)}},amzncsm.define=function(a){var b,c,d,e,f,g,h,i;try{for(b=function(a){return"string"==typeof a?amzncsm[a]:a},c=Array.prototype.slice.call(arguments),d=c[0],e=c.length>2?c[1]:[],f=c[c.length-1],g=[],h=0,i=e.length;i>h;h++)g.push(b(e[h]));amzncsm[d]=f.apply(f,g)}catch(j){j.message&&amzncsm.errors.push(j.message)}},amzncsm.invalidModuleException=function(a){this.value=a,this.message="does not conform to the expected format of a module",this.toString=function(){return this.value+this.message}},amzncsm.define("utils",[],function(){var a={shortName:"ut"};return a.init=function(a){},a.getFlashVersion=function(){var a,b,c,d=window.navigator,e="application/x-shockwave-flash",f="ShockwaveFlash.ShockwaveFlash",g="Shockwave Flash";if(void 0!=d.plugins&&"object"==typeof d.plugins[g])b=d.plugins[g].description,b&&void 0!==d.mimeTypes&&d.mimeTypes[e]&&d.mimeTypes[e].enabledPlugin&&(a=Number(b.replace(/^.*\s+(\d+)(\.\S+)?(\s+\S+)?$/,"$1")));else if(void 0!==window.ActiveXObject)try{c=new ActiveXObject(f),c&&(b=c.GetVariable("$version"),b&&(a=Number(b.split(" ")[1].split(",")[0])))}catch(h){}return(!a||isNaN(a))&&(a=0),a},a.getIEVersion=function(){var a,b,c=-1;return"Microsoft Internet Explorer"==navigator.appName?(a=navigator.userAgent,b=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"),null!=b.exec(a)&&(c=parseFloat(RegExp.$1))):navigator.userAgent.match(/Trident.*rv\:11\./)?c=11:navigator.userAgent.match(/Edge\/\d+\.\d+/)&&(c=12),c},a.isIE=function(){var b=a.getIEVersion();return b>-1},a.isFirefox=function(){return"undefined"!=typeof InstallTrigger},a.isChrome=function(){return/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)},a.isSafari=function(){return/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)},a.isWebkit=function(){return a.isChrome()||a.isSafari()},a.isSilk=function(){return/\bSilk\b/.test(navigator.userAgent)},a.isAndroid=function(){return window.webclient&&"function"==typeof webclient.getRealClickTime?window.cordova&&window.cordova.platformId&&"ios"==cordova.platformId?!1:!0:!1},a.detachAllHandlers=function(){var a,b;for(b=0;b<amzncsm.eventHandlers.length;b++)a=amzncsm.eventHandlers[b],amzncsm.removeEvent(a.elem,a.eventName,a.cb)},a.reportClientError=function(b){if(amzncsm.errorBeaconSent!==!0){var c=b===parseInt(b,10)?'{"m": "'+b+'"}':JSON.stringify(amzncsm.constructErrorMessage(b)),d="https:"===document.location.protocol?"https://":"http://",e=amzncsm.host||"aax.amazon-adsystem.com",f="/x/px/",g='{"adViewability":[{"error": '+c+'}], "c": "viewability", "api": "'+amzncsm.api+'", "error": 1}';(new Image).src=d+e+f+amzncsm.impId+"/"+g+"&cb="+Math.round(1e7*Math.random()),amzncsm.errorBeaconSent=!0,a.detachAllHandlers()}},a.setTimeout=function(b,c){return setTimeout(function(){try{b.call()}catch(c){c.message,a.reportClientError(c)}},c)},a.setInterval=function(b,c){return setInterval(function(){try{b.call()}catch(c){c.message,a.reportClientError(c)}},c)},a}),amzncsm.define("eventUtils",[],function(){var a={shortName:"eu"};return a.init=function(b){a.eventHandlers=[]},a.addEvent=function(b,c,d,e){b.addEventListener?b.addEventListener(c,d,e):b.attachEvent&&b.attachEvent("on"+c,d);var f={elem:b,eventName:c,cb:d};a.eventHandlers.push(f)},a.addCustomEvent=function(a,b,c){document.addEventListener?document.addEventListener(a,b,c):document.attachEvent?document.attachEvent("on"+a,function(){return b.call(document,window.event)}):document["on"+a]=b},a.removeEvent=function(a,b,c){document.removeEventListener?a.removeEventListener(b,c,!1):document.detachEvent&&a.detachEvent("on"+b,c)},a.createEvent=function(){return document.createEvent?function(a){var b=document.createEvent("Event");return b.initEvent(a,!0,!0),b}:function(a){var b=document.createEventObject();return b.eventType=a,b}}(),a.dispatchCustomEvent=function(b){document.dispatchEvent?document.dispatchEvent(a.createEvent(b)):document[b]?document[b]():document["on"+b]&&document["on"+b]()},a.stopPropagation=function(a){return a.stopPropagation?void a.stopPropagation():void(a.cancelBubble=!0)},a.preventDefault=function(a){a.preventDefault&&a.preventDefault(),a.returnValue=!1},a.getClickXY=function(a){return"pageX"in a?{pageX:a.pageX,pageY:a.pageY}:{pageX:a.clientX+document.documentElement.scrollLeft,pageY:a.clientY+document.documentElement.scrollTop}},a.handleVisibilityChange=function(b,c){var d,e=b.document;"undefined"!=typeof e.hidden?d="visibilitychange":"undefined"!=typeof e.mozHidden?d="mozvisibilitychange":"undefined"!=typeof e.msHidden?d="msvisibilitychange":"undefined"!=typeof e.webkitHidden&&(d="webkitvisibilitychange"),d&&a.addEvent(e,d,c,!1)},a.isPageVisibilitySupported=function(){return"undefined"!=typeof document.hidden||"undefined"!=typeof document.mozHidden||"undefined"!=typeof document.msHidden||"undefined"!=typeof document.webkitHidden},a.documentHasFocus=function(a){return a.hasFocus?a.hasFocus():!0},a.isWindowActive=function(){var b;return"undefined"!=typeof document.hidden?b="hidden":"undefined"!=typeof document.mozHidden?b="mozHidden":"undefined"!=typeof document.msHidden?b="msHidden":"undefined"!=typeof document.webkitHidden&&(b="webkitHidden"),"undefined"==typeof document[b]?a.documentHasFocus(document):!document[b]},a.getPixelID=function(){var a=null;return function(){return null===a&&(a=Math.random().toString(36).substr(2)),a}}(),a}),amzncsm.define("pixelQueue",[],function(){var a,b={shortName:"pq"},c=2500,d=4;return b.init=function(a,b){amzncsm.csmReport.pq={queue:[],impId:b}},b.firePixel=function(a){var b="https:"===document.location.protocol?"https://":"http://",c=amzncsm.host||"aax.amazon-adsystem.com",d="/x/px/",e=amzncsm.csmReport.pq;(new Image).src=b+c+d+(e.impId?e.impId+"/":"")+a+"&cb="+Math.round(1e7*Math.random())},a=function(){var a=amzncsm.csmReport.pq;a.queue.length>0&&(a.queue=[])},b.addPixel=function(b){var e=this,f=amzncsm.csmReport.pq;0===f.queue.length&&amzncsm.setTimeout(function(){f.queue.length>0&&(e.send(),a())},c),f.queue.push(JSON.parse(b)),f.queue.length>=d&&(e.send(),a())},b.send=function(){var a=amzncsm.getPixelID(),c=(new Date).getTime(),d=amzncsm.csmReport.pq;b.firePixel('{"adCsm": '+JSON.stringify(d.queue)+', "pixelId": "'+a+'", "ts": '+c+"}")},b}),amzncsm.define("viewDuration",["pixelQueue"],function(){var a,b,c={shortName:"vd"};return c.init=function(c){amzncsm.csmReport[c].vd={startts:0,maxduration:0,totalduration:0,isVisible:!1,pixelReportTime:[2e3,4e3,8e3,16e3],setIntervalHandler:null};var d=amzncsm.csmReport[c].vd;amzncsm.addCustomEvent("vis"+c,function(c){c=c||window.event,d.isVisible=!0;var e=performance.now(),f=c.type.substring(3);0===d.startts?d.startts=e:a(f),null===d.setIntervalHandler&&d.pixelReportTime.length>0&&b(f)},!1),amzncsm.addCustomEvent("inv"+c,function(a){if(a=a||window.event,d.startts>0){var b=performance.now();d.totalduration+=b-d.startts}d.startts=0,d.isVisible=!1,window.clearInterval(d.setIntervalHandler),d.setIntervalHandler=null},!1)},a=function(a){var b=amzncsm.csmReport[a].vd,c=performance.now();c-b.startts>b.maxduration&&(b.maxduration=c-b.startts,b.totalduration<b.maxduration&&(b.totalduration=b.maxduration),b.pixelReportTime.length>0&&b.maxduration>=b.pixelReportTime[0]&&(b.pixelReportTime.shift(),0===b.pixelReportTime.length&&(window.clearInterval(b.setIntervalHandler),amzncsm.dispatchCustomEvent("vdrcompl")),amzncsm.pixelQueue.addPixel('{"vdr": '+b.maxduration.toFixed(2)+', "tdr": '+b.totalduration.toFixed(2)+"}")))},b=function(b){var c=amzncsm.csmReport[b].vd;c.setIntervalHandler=amzncsm.setInterval(function(){a(b)},1e3)},c}),amzncsm.define("hoverStats",[],function(){var a,b,c={shortName:"hs"},d=2;return c.init=function(c,d){amzncsm.csmReport[c].hs={stime:0,duration:0,adIframe:d,pixelCount:0},amzncsm.addEvent(d,"mouseover",a,!1),amzncsm.addEvent(d,"mouseout",b,!1)},a=function(a){try{a=a||window.event;var b=a.clientX,c=a.clientY,d=a.target||a.srcElement,e="#"+d.id,f="undefined"!=typeof a.isTrusted?a.isTrusted:"",g=""!=f?', "trusted": '+f:"";amzncsm.csmReport[e].hs.stime=performance.now(),amzncsm.pixelQueue.addPixel('{"hvrx": '+b+', "hvry": '+c+g+"}")}catch(h){amzncsm.reportClientError(h)}},b=function(c){try{c=c||window.event;var e=performance.now(),f=c.target||c.srcElement,g="#"+f.id,h=amzncsm.csmReport[g].hs;e-h.stime>h.duration&&(h.duration=e-h.stime,h.duration>500&&(amzncsm.pixelQueue.addPixel('{"hdr": '+h.duration.toFixed(0)+"}"),h.pixelCount++,h.pixelCount>=d&&(amzncsm.removeEvent(h.adIframe,"mouseout",b),amzncsm.removeEvent(h.adIframe,"mouseover",a)))),h.stime=0}catch(i){amzncsm.reportClientError(i)}},c}),amzncsm.define("pageMetrics",[],function(){var a,b={shortName:"pm"};(new Date).getTime();return b.init=function(a,b){var c,d,e;amzncsm.csmReport[a].pm={visStatusTimes:{visible:{stime:0,duration:0},hidden:{stime:0,duration:0},prerender:{stime:0,duration:0},unloaded:{stime:0,duration:0},states:""}},c={},d=amzncsm.csmReport[a].pm,b.opener&&b.opener!==b&&(c.ipp=!0),amzncsm.isPageVisibilitySupported()&&(e=amzncsm.isWindowActive()?"visible":"hidden",void 0!==e&&(d.visStatusTimes.states=e.charAt(0),d.visStatusTimes[e].stime=window.performance.now().toFixed(0)),amzncsm.addCustomEvent("visStateChange"+a,function(b){var c,d,f=amzncsm.csmReport[a].pm;f.visStatusTimes.states.length>=5||(c=window.performance.now().toFixed(0),d=f.visStatusTimes,d[e].duration+=c-d[e].stime,e=amzncsm.isWindowActive()?"visible":"hidden",d[e].stime=c,d.states+=e.charAt(0),amzncsm.pixelQueue.addPixel(JSON.stringify(d)))},!1))},a=function(a){if("ontouchstart"in window&&"string"==typeof document.body.style.webkitTextSizeAdjust){var b=90==Math.abs(window.orientation)?screen.height:screen.width;a.pz=b/window.innerWidth}},b}),amzncsm.define("fraudMetrics",[],function(){var a={shortName:"fm"},b={SMALLER_SIZE_CONTAINER:1,OBSTRUCTION:2,INAPPROPRIATE_CSS_STYLE:3,HEADLESS_BROWSER:4,IE_VERSION_MISMATCH:5,WIN_VP_SIZE_RATIO:6},c={OPACITY:1,ZINDEX:2,VISIBILITY:3,DISPLAY:4},d=function(a){var b="";if((a.callPhantom||a._phantom||a.PhantomEmitter||a.__phantomas)&&(b="pjs"),a.Buffer&&(b="njs"),a.emit&&(b="cjs"),a.spawn&&(b="rhn"),a.webdriver&&(b="sel"),a.emit&&(b="cjs"),(a.domAutomation||a.domAutomationController)&&(b="chrm"),""===b)try{a.navigator.onLine&&a.navigator.onLine===!1&&(b="unkwn")}catch(c){amzncsm.reportClientError(c)}return b},e=function(a){var b,c,d,e,f=a.offsetWidth,g=a.offsetHeight,h=Number.MAX_VALUE,i=Number.MAX_VALUE,j=Number.MIN_VALUE,k=Number.MIN_VALUE,l=10,m=0,n=(f/l+1)*(g/l+1);for(b=0;f>=b;b+=l)for(c=0;g>=c;c+=l)elem=document.elementFromPoint(b,c),null!=elem&&(m++,h>b?h=b:b>j&&(j=b),i>c?i=c:c>k&&(k=c));return d=j-h,e=k-i,(0>=d||0>=e)&&(d=0,e=0),0!=n?m/n:0},f=function(){var a=amzncsm.getIEVersion(),b=11;return document.all&&(b=10),document.all&&!window.atob&&(b=9),document.all&&!document.addEventListener&&(b=8),document.all&&document.querySelector&&(b=7),document.all&&!window.XMLHttpRequest&&(b=6),document.all&&!document.compatMode&&(b=5),a>11||a==b},g=function(a,b){var c,d,e=a.offsetWidth,f=a.offsetHeight;do{if(c=b.offsetHeight,d=b.offsetWidth,.2>c/f||.2>d/e)return d+"x"+c;b=b.parentElement}while(b&&"body"!=b.tagName.toLowerCase());return null},h=function(a){if(!window.getComputedStyle)return!1;for(var b,d,e,f,g={opacity:[],"z-index":[],visibility:[],display:[]},h=0,i=!1;null!=a.parentElement&&5>h;){for(f=0;f<Object.keys(g).length;f++)try{d=Object.keys(g)[f],e=top.window.getComputedStyle(a,null).getPropertyValue(Object.keys(g)[f]),g[d].push(e)}catch(j){break}a=a.parentElement,h++}for(f=0;f<Object.keys(g).length;f++)d=Object.keys(g)[f],"opacity"==d?(b=Math.min.apply(Math,g[d]),.5>b&&(i=c.OPACITY)):"z-index"==d?g[d].forEach(function(a,b,d){isNaN(a)===!1&&0>a&&(i=c.ZINDEX)}):"visibility"==d?(b=g[d].indexOf("hidden"),-1!=b&&(i=c.VISIBILITY)):"display"==d&&(b=g[d].indexOf("none"),-1!=b&&(i=c.DISPLAY));return i},i=function(a){var b=a.outerWidth,c=a.outerHeight,d=screen.width,e=screen.height,f={screensz:"",vpsz:"",ratio:0};return!isNaN(b)&&!isNaN(c)&&!isNaN(d)&&d>0&&!isNaN(e)&&e>0&&(f.vpsz=b+"X"+c,f.screensz=d+"X"+e,f.ratio=c*b/(d*e)),f};return a.init=function(a,c){var j,k,l;amzncsm.csmReport[a].fm={checkFraudMetrics:!1},amzncsm.addCustomEvent("amzncsmAtf",function(c){var d,e,f=c.detail,i=f.adElement,j=f.adElementContainer;f.adID==a&&(d=g(i,j),null!=d&&amzncsm.pixelQueue.addPixel('{"vfrd": '+b.SMALLER_SIZE_CONTAINER+', "dbg": "'+d+'"}'),e=h(j),e!==!1&&amzncsm.pixelQueue.addPixel('{"vfrd": '+b.INAPPROPRIATE_CSS_STYLE+', "dbg": '+e+"}"))},!1),amzncsm.addCustomEvent("viewprcnt",function(c){var d,f,g,h,i;if(amzncsm.csmReport[a].fm.checkFraudMetrics===!1){if(amzncsm.csmReport[a].fm.checkFraudMetrics=!0,d=c.detail,f=d.vFrac,g=d.adElement,h=d.adElementContainer,d.adID!=a)return;amzncsm.isIE()&&(i=e(g),f-i>.2&&amzncsm.pixelQueue.addPixel('{"vfrd": '+b.OBSTRUCTION+"}"))}},!1),j=d(c),""!==j&&amzncsm.pixelQueue.addPixel('{"vfrd": '+b.HEADLESS_BROWSER+', "dbg": "'+j+'"}'),amzncsm.isIE()&&(k=f(),k===!1&&amzncsm.pixelQueue.addPixel('{"vfrd": '+b.IE_VERSION_MISMATCH+', "dbg": "'+k+'"}')),l=i(c),l.ratio<.1&&l.ratio>0&&amzncsm.pixelQueue.addPixel('{"vfrd": '+b.WIN_VP_SIZE_RATIO+', "dbg": "'+l.screensz+"-"+l.vpsz+'"}')},a}),amzncsm.detectViewability=function(a,b,c,d,e){function f(a,b){for(var c,d,e,g,h,i,j=2,k=2;a&&a.offsetParent;)j+=a.offsetTop,k+=a.offsetLeft,a=a.offsetParent;if(b!=B.hostWindow){for(c=b.parent,e=c.document.getElementsByTagName("iframe"),g=0;g<e.length;g++)e[g].contentWindow?h=e[g].contentWindow:e[g].contentDocument&&(h=e[g].contentDocument.window),h==b&&(d=e[g]);i=f(d,b.parent),j+=i.top,k+=i.left}return B.offsetPos={top:j,left:k},{top:j,left:k}}function g(a,b,c){var d,e,f,g="top"==a?"pageYOffset":"pageXOffset";return void 0!==b[g]?b[g]:(d=c.documentElement,e=d.scrollTop||c.body.scrollTop,f=d.scrollLeft||c.body.scrollLeft,"top"==a?e:f)}function h(a,b){var c=b.body,d=a.innerWidth||b.documentElement.clientWidth||c.clientWidth||640,e=a.innerHeight||b.documentElement.clientHeight||c.clientHeight||480;return{width:d,height:e}}function i(a,b){if(B.getDuration){var c=B.end-B.start;B.totalTime+=c}}function j(a){B.startScrollX=B.scrollX,B.startScrollY=B.scrollY}function k(a){}function l(){var a,b,c,d,e,f,g;if(B.beaconSent!==!0){a=amzncsm.srcId?'"src": '+amzncsm.srcId+", ":"",b=o(),c=p(),d=(new Date).getTime(),window.performance&&window.performance.timing&&(e=((d-(window.performance.timing.responseStart||window.performance.timing.domLoading))/1e3).toFixed(2),B.hostWindow&&(f=((d-(B.hostWindow.performance.timing.responseStart||B.hostWindow.performance.timing.domLoading))/1e3).toFixed(2)));try{g=(new Date).getTime(),t('{"v": {"p": 50, "t": 1, "def": "iab"}, "top": '+B.topPos+', "left": '+B.leftPos+', "wh": '+(void 0!==B.winHeight?B.winHeight:'"undefined"')+', "ww": '+(void 0!==B.winWidth?B.winWidth:'"undefined"')+', "sx": '+(void 0!==B.scrollX?B.scrollX:'"undefined"')+', "sy": '+(void 0!==B.scrollY?B.scrollY:'"undefined"')+', "ah": '+(void 0!==B.adHeight?B.adHeight:'"undefined"')+', "aw": '+(void 0!==B.adWidth?B.adWidth:'"undefined"')+', "hf": '+(void 0!==B.hasFocus?B.hasFocus:'"undefined"')+', "vs": "'+(void 0!==B.visibilityState?B.visibilityState:'"undefined"')+'", "ttv": '+(void 0!==e?e:'"undefined"')+', "ptv": '+(void 0!==f?f:'"undefined"')+', "ts": '+g+', "si": '+b+', "dcv": '+c+', "pixelId": "'+B.pixelId+'"}'),m()}catch(h){amzncsm.reportClientError(h)}}}function m(){B.beaconSent=!0}function n(a,b){var c,d,e,i,j,k,l,m,n,o,p,q,r;try{return c=B.offsetPos||f(a,window),d=c.top,e=c.left,i=a.offsetWidth,j=a.offsetHeight,k=h(B.hostWindow,B.hostDoc),l=k.height,m=k.width,n=i,o=j,p=g("left",B.hostWindow,B.hostDoc),q=g("top",B.hostWindow,B.hostDoc),q>d&&(o-=q-d),d+j>q+l&&(o-=d+j-(q+l)),p>e&&(n-=p-e),e+i>p+m&&(n-=e+i-(p+m)),0>n&&(n=0),n>i&&(n=i),0>o&&(o=0),o>j&&(o=j),B.adHeight=j,B.adWidth=i,B.leftPos=e.toFixed(0),B.topPos=d.toFixed(0),B.winWidth=m,B.winHeight=l,B.scrollX=p,B.scrollY=q,B.hasFocus=amzncsm.documentHasFocus(B.hostDoc),B.visibilityState=amzncsm.isWindowActive()?"visible":"hidden",r=0!=j&&0!=i?n*o/(j*i):0}catch(s){amzncsm.reportClientError(s)}return 0}function o(){return void 0!==B.winHeight&&void 0!==B.winWidth?(Math.abs(B.startScrollX-B.scrollX)/B.winWidth+Math.abs(B.startScrollY-B.scrollY)/B.winHeight).toFixed(2):void 0}function p(){var a=B.winWidth/2,b=B.winHeight/2,c=B.topPos-B.scrollY,d=B.leftPos-B.scrollX;return a>d&&a<d+B.adElement.offsetWidth&&b>c&&b<c+B.adElement.offsetHeight?0:Math.sqrt(Math.pow(2*(a-d)/B.winWidth,2)+Math.pow(2*(b-c)/B.winHeight,2)).toFixed(2)}function q(a,b){var c,d=0;return B.insideCrossDomainIframe===!1&&(d=n(a,b)),d>B.cutoff&&amzncsm.isWindowActive()&&amzncsm.documentHasFocus(B.hostDoc)?(amzncsm.dispatchCustomEvent("vis"+B.adID),window.CustomEvent&&(c=new CustomEvent("viewprcnt",{detail:{vFrac:d,adID:B.adID,adElement:B.adElement,adElementContainer:B.adElementContainer}}),document.dispatchEvent&&document.dispatchEvent(c))):amzncsm.dispatchCustomEvent("inv"+B.adID),d}function r(){var a,b=amzncsm.srcId?'"src": '+amzncsm.srcId+", ":"";B.beaconSent!==!0&&(a=void 0!==B.hostDoc.visibilityState&&"visible"!==B.hostDoc.visibilityState?"notActiveTab":amzncsm.documentHasFocus(B.hostDoc)===!1?"windowInBackground":"notInVP",t('{"adViewability":[{"vCancel": "'+a+'", "pixelId": "'+B.pixelId+'"}], "c": "viewability", "api": "'+amzncsm.api+'", '+b+'"debug": 1}'))}function s(a){function b(){B.beaconSent&&amzncsm.captureViewDuration!==!0||(B.timer&&clearTimeout(B.timer),B.timer=amzncsm.setTimeout(function(){l()},B.cutoffTime))}function c(){j(u),B.start=(new Date).getTime()/1e3,b(),B.timerStarted=!0}function d(){amzncsm.dispatchCustomEvent("inv"+B.adID),clearTimeout(B.timer),B.timerStarted=!1,B.end=(new Date).getTime()/1e3,k(u),i(s,u)}var e,f,g,h,m,n,o,p,s=B.adElement,u=B.adElementContainer;B.adID;if(a===!0){B.area=q(s,u),e=B.area,f=amzncsm.isWindowActive()&&amzncsm.documentHasFocus(B.hostDoc)||B.insideCrossDomainIframe,B.area>B.cutoff?(g=!0,f&&c()):(g=!1,h=!1),g===!0&&amzncsm.setTimeout(r,1200);try{m=amzncsm.srcId?'"src": '+amzncsm.srcId+", ":"",n=(new Date).getTime(),t('{"atf": '+g+', "top": '+B.topPos+', "left": '+B.leftPos+', "wh": '+(void 0!==B.winHeight?B.winHeight:'"undefined"')+', "ww": '+(void 0!==B.winWidth?B.winWidth:'"undefined"')+', "sx": '+(void 0!==B.scrollX?B.scrollX:'"undefined"')+', "sy": '+(void 0!==B.scrollY?B.scrollY:'"undefined"')+', "ah": '+(void 0!==B.adHeight?B.adHeight:'"undefined"')+', "aw": '+(void 0!==B.adWidth?B.adWidth:'"undefined"')+', "hf": '+(void 0!==B.hasFocus?B.hasFocus:'"undefined"')+', "vs": "'+(void 0!==B.visibilityState?B.visibilityState:"undefined")+'", "ts": '+n+', "pixelId": "'+B.pixelId+'"}'),window.CustomEvent&&(o=new CustomEvent("amzncsmAtf",{detail:{adID:B.adID,adElement:B.adElement,adElementContainer:B.adElementContainer}}),document.dispatchEvent&&document.dispatchEvent(o))}catch(v){amzncsm.reportClientError(v)}}else p=q(s,u),amzncsm.isWindowActive()&&amzncsm.documentHasFocus(B.hostDoc)&&(0==B.focused||null==B.focused)&&p>B.cutoff&&0==B.timerStarted&&c(),amzncsm.isWindowActive()&&amzncsm.documentHasFocus(B.hostDoc)?B.focused=!0:(d(),B.focused=!1),p>=B.cutoff&&0==B.timerStarted?c():p<B.cutoff&&1==B.timerStarted&&d(),B.area=p}function t(){var a=Array.prototype.slice.call(arguments);amzncsm.pixelQueue.firePixel.apply(amzncsm.pixelQueue,a)}function u(a){try{B.debug&&window.console&&window.console.log(a)}catch(b){amzncsm.reportClientError(b)}}var v,w,x,y,z,A,B=this,C=1,D=.5;for(this.adElement=a,this.adElementContainer=a,this.impId=b,this.adID=e,this.getDuration=!0,this.totalTime=0,this.leftPos=null,this.topPos=null,this.start=null,this.end=null,this.area=0,this.cutoff=D,this.cutoffTime=1e3*C,this.focused=null,this.timer=!1,this.timerStarted=!1,this.beaconSent=!1,this.hostWindow=c,this.hostDoc=d,this.insideCrossDomainIframe=!1,this.pixelId=amzncsm.getPixelID(),v=null,w=0;this.hostWindow.parent&&this.hostWindow!=this.hostWindow.parent&&this.insideCrossDomainIframe===!1&&5>=w;)try{w++,x=this.hostWindow.parent,y=x.document&&x.document.body&&x.document.body.innerHTML,y&&(v=this.hostWindow,this.hostWindow=this.hostWindow.parent,this.hostDoc=this.hostWindow.document)}catch(E){this.insideCrossDomainIframe=!0;break}if(null!=v&&this.insideCrossDomainIframe===!1)for(z=this.hostDoc.getElementsByTagName("iframe"),z=[].slice.call(z),A=0;A<z.length;A++)if(z[A].contentWindow==v){this.adElementContainer=z[A];break}this.adElement&&this.adElement.document&&"IFRAME"!=this.adElement.tagName&&(this.adElement=this.adElement.document.body),this.adElementContainer&&this.adElementContainer.document&&"IFRAME"!=this.adElementContainer.tagName&&(this.adElementContainer=this.adElementContainer.document.body),this.insideCrossDomainIframe&&amzncsm.errors.push(amzncsm.errorCodes.SLOT_INSIDE_UNFRIENDLY_FRAME),amzncsm.csmReport[this.adID].container=this.adElementContainer,amzncsm.csmReport[this.adID].adElement=this.adElement,this.debug=-1!==window.location.href.indexOf("csm_debug_mode"),amzncsm.log=u,this.collectData=function(){var a,b=this;s(!0),a=function(){try{if(!b.beaconSent||amzncsm.captureViewDuration===!0)var a=amzncsm.setTimeout(function(){a&&clearTimeout(a),s(!1)},50)}catch(c){amzncsm.reportClientError(c)}},amzncsm.addEvent(this.hostWindow,"blur",a,!1),amzncsm.addEvent(this.hostWindow,"focus",a,!1),amzncsm.handleVisibilityChange(window,function(){amzncsm.dispatchCustomEvent("visStateChange"+b.adID),a()}),amzncsm.addEvent(this.hostWindow,"resize",a,!1),amzncsm.addEvent(this.hostWindow,"scroll",a,!1)}},amzncsm.rmD=function(a,b,c,d,e){try{amzncsm.impId=b,amzncsm.rm("DTB",{e:a,i:b,w:c,d:d,s:e})}catch(f){amzncsm.reportClientError(f)}},amzncsm.rmC=function(a,b,c,d){var e,f,g;try{amzncsm.impId=b,e=a.contentWindow||a.contentDocument.window,f=e.document,g=function(a){var b=a.readyState;return"loaded"==b||"interactive"==b||"complete"==b},g(f)?amzncsm.rm("CPM",{e:a,i:b,w:c,d:d}):void 0===document.onreadystatechange?amzncsm.rm("CPM",{e:a,i:b,w:c,d:d}):f.onreadystatechange=function(){try{g(d)&&amzncsm.rm("CPM",{e:a,i:b,w:c,d:d})}catch(e){amzncsm.reportClientError(e)}}}catch(h){amzncsm.reportClientError(h)}},amzncsm.rm=function(){var a={CPM:{viewDuration:!0,hoverStats:!0,pageMetrics:!0,fraudMetrics:!0,domainMask:!1},DTB:{viewDuration:!0,hoverStats:!0,pageMetrics:!0,fraudMetrics:!0,domainMask:!1}},b=function(a){for(var b,c,d=[];a.parentNode;){if(a.id){d.unshift("#"+a.id);break}if(a==a.ownerDocument.documentElement)d.unshift(a.tagName);else{for(b=1,c=a;c.previousElementSibling;c=c.previousElementSibling,b++);d.unshift(a.tagName+":nth-child("+b+")")}a=a.parentNode}return d.join(" > ").substring(0,100)},c=function(a){var b,c,d,e=window.performance.getEntriesByType("measure"),f={};for(b=0;b<e.length;++b)e[b].name.endsWith(a)&&(c=e[b],d=c.name.substring(0,c.name.length-a.length),f[d]=c.duration.toFixed(2));amzncsm.pixelQueue.addPixel(JSON.stringify(f))},d=function(a,d){var f,g,h=d.e,i=d.i,j=d.w,k=d.d,l=d.s;-1!==j.location.href.indexOf("csm_debug_mode");return l&&(amzncsm.srcId=l),f=b(h),amzncsm.csmReport=amzncsm.csmReport||{},amzncsm.csmReport.hasOwnProperty(f)?!1:(amzncsm.csmReport[f]={},e(a,h,i,j,k,f),window.performance&&window.performance.mark&&"function"==typeof window.performance.mark&&window.performance.mark("csmStart"+f),a=a.toUpperCase(),"CPM"!=a&&"DTB"!=a?amzncsm.reportError(amzncsm.errorCodes.INVALID_API):(amzncsm.api=a,g=new amzncsm.detectViewability(h,i,j,k,f),g.collectData&&g.collectData()),window.performance&&window.performance.mark&&"function"==typeof window.performance.mark&&(window.performance.mark("csmEnd"+f),window.performance.measure("csmTot"+f,"csmStart"+f,"csmEnd"+f),c(f)),void(amzncsm.errors.length>0&&amzncsm.reportErrors(a,l,i)))},e=function(b,c,d,e,f,g){var h,i,j,k,l,m,n,o,p;amzncsm.loadModules(g,[{name:"eventUtils",params:[]}]);for(h in amzncsm.eventUtils)amzncsm.eventUtils.hasOwnProperty(h)&&(amzncsm[h]=amzncsm.eventUtils[h]);amzncsm.loadModules(g,[{name:"utils",params:[]}]);for(h in amzncsm.utils)amzncsm.utils.hasOwnProperty(h)&&(amzncsm[h]=amzncsm.utils[h]);if(amzncsm.loadModules(g,[{name:"pixelQueue",params:[d]}]),i=-1!==e.location.href.indexOf("csm_debug_mode"),i&&-1!==top.location.href.indexOf("csm_uems")){for(j=function(c){for(var d in a[b])a[b][d]=c},k=top.location.href.split("+").join(" "),l={},n=/[?&]?([^=]+)=([^&]*)/g;m=n.exec(k);)l[decodeURIComponent(m[1])]=decodeURIComponent(m[2]);for(o=l.csm_uems.split(","),j(!1),p=0;p<o.length;p++)"vd"==o[p]?a[b].viewDuration=!0:"hs"==o[p]?a[b].hoverStats=!0:"pm"==o[p]?a[b].pageMetrics=!0:"fm"==o[p]?a[b].fraudMetrics=!0:"all"==o[p]?j(!0):"none"==o[p]}a[b].viewDuration===!0&&(amzncsm.captureViewDuration=!0,amzncsm.loadModules(g,[{name:"viewDuration",params:[]}])),a[b].hoverStats===!0&&amzncsm.loadModules(g,[{name:"hoverStats",params:[c]}]),a[b].pageMetrics===!0&&amzncsm.loadModules(g,[{name:"pageMetrics",params:[e]}]),a[b].fraudMetrics===!0&&amzncsm.loadModules(g,[{name:"fraudMetrics",params:[e]}]),a[b].domainMask===!0&&amzncsm.loadModules(g,[{name:"domainMask",params:[]}])};return d}();